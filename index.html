<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Registro | ServiçosApp</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <div class="container">
    <h1 class="page-title">Criar Conta</h1>
    
    <!-- Toggle modo Cliente / Trabalhador com divisor -->
    <div class="mode-switch-container">
      <div class="mode-switch">
        <button class="mode-btn active" data-mode="cliente">Cliente</button>
        <button class="mode-btn" data-mode="trabalhador">Trabalhador</button>
      </div>
      <div class="mode-divider"></div>
    </div>

    <!-- Área de upload de foto -->
    <div class="avatar-upload">
      <div class="avatar-placeholder" id="avatar-click-area">
        <svg width="48" height="48" viewBox="0 0 24 24" fill="none">
          <path d="M4 7h4l2-2h4l2 2h4v12H4V7z" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <circle cx="12" cy="13" r="3" stroke="#ffffff" stroke-width="2"/>
        </svg>
      </div>
      <button class="btn-upload">Adicionar Foto</button>
      <input type="file" accept="image/*" id="photo-input" hidden />
    </div>

    <form class="form">
      <label>
        <span>Nome completo</span>
        <input type="text" name="fullname" placeholder="Seu nome completo" required />
      </label>

      <label>
        <span>CPF</span>
        <input type="text" name="cpf" placeholder="000.000.000-00" required maxlength="14" />
      </label>

      <label>
        <span>Celular</span>
        <input type="tel" name="phone" placeholder="(XX) XXXXX-XXXX" required />
      </label>

      <div class="row">
        <label class="flex-item">
          <span>Cidade</span>
          <input
            type="text"
            name="city"
            value="Parauapebas"
            readonly
            required
          />
        </label>
        <label class="flex-item required-field">
            <span>Bairro</span>
            <select name="neighborhood" required>
              <option value="">Selecione seu bairro</option>
              <option>Altamira</option>
              <option>Amazônia</option>
              <option>Apoema</option>
              <option>Bairro da Paz</option>
              <option>Bairro dos Minérios</option>
              <option>Bela Vista</option>
              <option>Beira Rio I</option>
              <option>Beira Rio II</option>
              <option>Betânia</option>
              <option>Bom Jardim</option>
              <option>Caetanópolis</option>
              <option>Carajás</option>
              <option>Casas Populares I</option>
              <option>Casas Populares II</option>
              <option>Cidade Jardim</option>
              <option>Cidade Nova</option>
              <option>Cinco Estrelas</option>
              <option>Chácara da Lua</option>
              <option>Chácara das Estrelas</option>
              <option>Chácara do Sol</option>
              <option>Esperança</option>
              <option>Esplanada</option>
              <option>Guanabara</option>
              <option>Guanabara II</option>
              <option>Ipiranga</option>
              <option>Ipiranga II</option>
              <option>Jardim América</option>
              <option>Jardim América II</option>
              <option>Jardim Canadá</option>
              <option>Jardim Canadá II</option>
              <option>Jardim Tropical</option>
              <option>Jardim Tropical II</option>
              <option>Karajás Sul</option>
              <option>Liberdade I</option>
              <option>Liberdade II</option>
              <option>Linha Verde</option>
              <option>Loteamento Ipê</option>
              <option>Maranhão</option>
              <option>Maranhão II</option>
              <option>Montes Claros</option>
              <option>Nova Carajás</option>
              <option>Nova Vida</option>
              <option>Nova Vida II</option>
              <option>Novo Brasil</option>
              <option>Novo Horizonte</option>
              <option>Novo Tempo</option>
              <option>Novo Viver</option>
              <option>Palmares II</option>
              <option>Palmares Sul</option>
              <option>Parque dos Carajás I</option>
              <option>Panorama</option>
              <option>Parque das Nações</option>
              <option>Parque das Nações II</option>
              <option>Polo Moveleiro</option>
              <option>Primavera</option>
              <option>Residencial Alto Boa Vista</option>
              <option>Residencial Alto Bonito</option>
              <option>Residencial Bambuí</option>
              <option>Residencial Brasília</option>
              <option>Residencial Morada Nova</option>
              <option>Residencial Martini</option>
              <option>Residencial Porto Seguro</option>
              <option>Residencial Rio Verde</option>
              <option>Residencial Vale do Sol</option>
              <option>Residencial Vila Nova</option>
              <option>Residencial Vista do Vale</option>
              <option>Rio Verde</option>
              <option>São José</option>
              <option>São Lucas</option>
              <option>São Lucas II</option>
              <option>São Luíz</option>
              <option>Serra Azul</option>
              <option>Talismã</option>
              <option>Vale dos Carajás</option>
              <option>Vida Nova</option>
              <option>Vida Nova II</option>
              <option>Vila Carimã</option>
              <option>Vila Rica</option>
              <option>União</option>
            </select>
          </label>
        </div>
      
      <!-- Campos específicos para Trabalhador -->
      <div class="worker-fields">
        <label>
          <span>Função/Serviço (Selecione um ou mais serviços)</span>
          <div class="service-dropdown">
            <div class="dropdown-input">
              <input type="text" name="service" placeholder="Digite para buscar serviços" autocomplete="off" />
            </div>
            <div class="dropdown-options">
              <!-- Opções serão preenchidas via JavaScript -->
            </div>
          </div>
        </label>
        
        <!-- Área para exibir serviços selecionados -->
        <div class="selected-services-container">
          <div class="selected-services-list" id="selected-services">
            <!-- Os serviços selecionados serão exibidos aqui -->
          </div>
        </div>
        
        <label>
          <span>Descrição</span>
          <textarea name="description" placeholder="Descreva sua experiência, habilidades e serviços que você oferece"></textarea>
        </label>
      </div>
    </form>

    <button class="btn-next">Registrar</button>
  </div>

  <script>
    // Lista de serviços disponíveis
      const availableServices = [
      // DOMÉSTICOS E DIÁRIOS
      "Diarista",
      "Lavadeira de Roupas",
      "Passadeira",
      "Cuidador de Idosos",
      "Babá",
      "Cozinheira Doméstica",
      "Faxineiro de Condomínios",
      "Lavador de Janelas",
      "Jardineiro",
      "Carregador de Móveis",
      "Desentupidor de Pias",
      "Lavador de Carros",
      "Cuidados com Pets (passeador, banho)",
      "Montador de Móveis",
      
      // CONSTRUÇÃO E REPAROS
      "Pintor",
      "Pedreiro",
      "Servente de Obra",
      "Pintor de Casas",
      "Eletricista",
      "Encanador",
      "Gesseiro",
      "Azulejista",
      "Montador de Drywall",
      "Telhadeiro (telhas)",
      "Soldador",
      "Serralheiro",
      "Instalador de Portas e Janelas",
      "Lixador de Pisos",
      "Colocador de Piso Laminado",
      "Montador de Grades",
      "Reformador de Móveis",
      
      // AUTOMOTIVOS
      "Mecânico de Carros",
      "Borracheiro",
      "Funileiro",
      "Lavador de Carros Profissional",
      "Polidor de Faróis",
      "Instalador de Som Automotivo",
      "Vendedor de Peças Usadas",
      "Rebocador de Veículos",
      
      // ALIMENTAÇÃO
      "Churrasqueiro de Festas",
      "Salgadeira para Eventos",
      "Boleira (doces caseiros)",
      "Padeiro Artesanal",
      "Marmitex Delivery",
      "Vendedor de Pastel",
      "Vendedor de Milho na Brasa",
      "Lancheiro de Bairro",
      "Fazedor de Cuscuz",
      "Cozinheiro de Food Truck",
      
      // BELEZA E CUIDADOS
      "Cabeleireiro Popular",
      "Barbeiro de Bairro",
      "Manicure/Pedicure",
      "Esteticista",
      "Maquiadora",
      "Depiladora",
      "Massagista",
      "Tatuador",
      "Designer de Sobrancelhas",
      "Maquiadora para Festas",
      "Depiladora",
      "Massagista de Cadeira",

      
      // MERCADO E FEIRAS
      "Feirante (hortifrúti)",
      "Açougueiro de Mercado",
      "Peixeiro",
      "Vendedor de Queijo Coalho",
      "Empacotador de Supermercado",
      "Atendente de Sacolão",
      "Vendedor de Caldo de Cana",
      "Torrador de Amendoim",
      
      // TRANSPORTE E ENTREGAS
      "Mototaxista",
      "Motoboy",
      "Taxista",
      "Entregador de Gás",
      "Carroceiro (coleta de recicláveis)",
      "Transportador de Mudanças",
      "Ciclista Entregador",
      "Carroceiro de Animais",
      "Entregador de Encomendas",
      
      // TECNOLOGIA BÁSICA
      "Técnico de Celular",
      "Instalador de Antenas TV",
      "Reparador de Computadores",
      "Configurador de Wi-Fi",
      "Vendedor de Cabos e Acessórios",
      "Reparador de Impressoras",
      
      // SERVIÇOS GERAIS
      "Chaveiro",
      "Sapateiro",
      "Costureira de Consertos",
      "Tapeceiro de Sofá",
      "Restaurador de Móveis Antigos",
      "Reciclador de Eletrônicos",
      "Desmontador de Móveis",
      "Ajudante de Mudanças",
      "Reparador de Eletrodomésticos",
      
      // AGRICULTURA E ANIMAIS
      "Roçador de Lotes",
      "Plantador de Hortas",
      "Tratorista",
      "Toco de Gado",
      "Tosador de Ovelhas",
      "Vaqueiro",
      "Ajudante de Sítio",
      "Cuidadores de Animais",
      "Veterinário de Animais Silvestres",
      
      // EVENTOS E FESTAS
      "Garçom para Eventos",
      "Barman de Festa",
      "Sonoplasta (som simples)",
      "Decorador de Festas Juninas",
      "Fotógrafo de Eventos Populares",
      "Locador de Mesas/Cadeiras",
      "Faz-tudo de Churrascaria",
      "Montador de Palco",
      "Montador de Estruturas para Eventos",
      
      // SAÚDE BÁSICA
      "Cuidador de Idosos",
      "Aplicador de Injeções",
      "Massoterapeuta",

      
      // EDUCAÇÃO INFORMAL
      "Reforço Escolar",
      "Professor(a) de Alfabetização",
      "Instrutor(a) de Informática Básica",
      "Professor(a) de Música",
      "Professor(a) de Dança",
      "Professor(a) de Artesanato",
      
      // SERVIÇOS URBANOS
      "Gari Autônomo",
      "Catador de Recicláveis",
      "Lavador de Lixeiras",
      "Pintor de Meio-Fio",
      "Podador de Árvores",
      "Recolhedor de Entulho",
      
      // OFÍCIOS TRADICIONAIS
      "Amolador de Facas",
      "Afiador de Tesouras",
      "Consertador de Panelas",
      "Funileiro de Utensílios",
      "Vendedor de Gelo",
      
      // NEGÓCIOS INFORMAIS
      "Vendedor de Roupas de Brechó",
      "Revendedor de Cosméticos",
      "Instalador de Redes (dormir)",
      "Pintor de Letreiros",
      "Artesão de Bijuterias",
      "Vendedor de Artesanato",
      "Vendedor de Doces Caseiros",
      
      // OUTROS
      "Vigia Noturno",
      "Lavador de Tapetes",
      "Ajudante de Obras",
      "Instalador de Ar-Condicionado",
      "Colocador de Papel de Parede",
      "Montador de Piscinas de Lona",
      "Vendedor de Picolé"
    ];

    // Array para armazenar os serviços selecionados
    const selectedServices = [];
    
    // Toggle de modo
    const modeButtons = document.querySelectorAll('.mode-btn');
    const workerFields = document.querySelector('.worker-fields');
    let currentMode = 'cliente';
    
    modeButtons.forEach(btn => btn.addEventListener('click', () => {
      modeButtons.forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      currentMode = btn.dataset.mode;
      
      // Mostrar/ocultar campos específicos para trabalhador
      if (currentMode === 'trabalhador') {
        workerFields.style.display = 'flex';
      } else {
        workerFields.style.display = 'none';
      }
      
      console.log('Modo selecionado:', currentMode);
    }));

    // Upload de foto - tornar o ícone clicável também
    document.getElementById('avatar-click-area').addEventListener('click', () => {
      document.getElementById('photo-input').click();
    });
    
    document.querySelector('.btn-upload').addEventListener('click', () => {
      document.getElementById('photo-input').click();
    });
    
    document.getElementById('photo-input').addEventListener('change', function(){
      if (this.files && this.files[0]) {
        const svgElements = document.querySelectorAll('.avatar-placeholder svg path, .avatar-placeholder svg circle');
        svgElements.forEach(el => el.setAttribute('stroke', '#ffffff'));
        
        // Mudar aparência do placeholder quando uma foto é selecionada
        const avatarPlaceholder = document.querySelector('.avatar-placeholder');
        avatarPlaceholder.style.borderStyle = 'solid';
        avatarPlaceholder.style.borderColor = '#ffffff';
        
        // Aqui poderia adicionar código para mostrar a imagem selecionada
      }
    });

    // Máscara para CPF
    document.querySelector('input[name="cpf"]').addEventListener('input', function(e) {
      let value = e.target.value.replace(/\D/g, '');
      if (value.length > 11) value = value.slice(0, 11);
      
      if (value.length > 9) {
        value = value.replace(/(\d{3})(\d{3})(\d{3})(\d{1,2})/, '$1.$2.$3-$4');
      } else if (value.length > 6) {
        value = value.replace(/(\d{3})(\d{3})(\d{1,3})/, '$1.$2.$3');
      } else if (value.length > 3) {
        value = value.replace(/(\d{3})(\d{1,3})/, '$1.$2');
      }
      
      e.target.value = value;
    });

    // Máscara para telefone
    document.querySelector('input[name="phone"]').addEventListener('input', function(e) {
      let value = e.target.value.replace(/\D/g, '');
      if (value.length > 11) value = value.slice(0, 11);
      
      if (value.length > 6) {
        value = value.replace(/(\d{2})(\d{5})(\d{1,4})/, '($1) $2-$3');
      } else if (value.length > 2) {
        value = value.replace(/(\d{2})(\d{1,5})/, '($1) $2');
      }
      
      e.target.value = value;
    });
    
    // Dropdown para Função/Serviço
    const serviceInput = document.querySelector('input[name="service"]');
    const dropdownOptions = document.querySelector('.dropdown-options');
    const selectedServicesList = document.getElementById('selected-services');
    
    // Função para renderizar os serviços selecionados
    function renderSelectedServices() {
      selectedServicesList.innerHTML = '';
      
      if (selectedServices.length === 0) {
        const emptyMessage = document.createElement('div');
        emptyMessage.className = 'empty-services-message';
        emptyMessage.textContent = 'Nenhum serviço selecionado - selecione pelo menos um serviço';
        selectedServicesList.appendChild(emptyMessage);
        return;
      }
      
      selectedServices.forEach(service => {
        const serviceTag = document.createElement('div');
        serviceTag.className = 'service-tag';
        
        const serviceText = document.createElement('span');
        serviceText.textContent = service;
        
        const removeBtn = document.createElement('button');
        removeBtn.className = 'remove-service-btn';
        removeBtn.textContent = '✕';
        removeBtn.addEventListener('click', () => {
          const index = selectedServices.indexOf(service);
          if (index > -1) {
            selectedServices.splice(index, 1);
            renderSelectedServices();
          }
        });
        
        serviceTag.appendChild(serviceText);
        serviceTag.appendChild(removeBtn);
        selectedServicesList.appendChild(serviceTag);
      });
    }
    
    // Função para adicionar um serviço à lista de selecionados
    function addService(service) {
      // Verifica se o serviço já está na lista
      if (!selectedServices.includes(service)) {
        selectedServices.push(service);
        renderSelectedServices();
        serviceInput.value = ''; // Limpa o campo de busca
      }
    }
    
    // Preenche as opções de serviços de acordo com o filtro
    function fillOptions(filter = '') {
      dropdownOptions.innerHTML = '';
      const filteredServices = availableServices.filter(service => 
        service.toLowerCase().includes(filter.toLowerCase())
      );
      
      filteredServices.forEach(service => {
        const option = document.createElement('div');
        option.classList.add('option-item');
        option.textContent = service;
        
        // Verifica se o serviço já está selecionado
        if (selectedServices.includes(service)) {
          option.classList.add('selected');
        }
        
        option.addEventListener('click', () => {
          addService(service);
          hideDropdown();
        });
        
        dropdownOptions.appendChild(option);
      });
      
      if (filteredServices.length === 0) {
        const noResults = document.createElement('div');
        noResults.classList.add('option-item', 'no-results');
        noResults.textContent = 'Nenhum serviço encontrado';
        dropdownOptions.appendChild(noResults);
      }
    }
    
    function showDropdown() {
      dropdownOptions.classList.add('show');
      fillOptions(serviceInput.value);
    }
    
    function hideDropdown() {
      dropdownOptions.classList.remove('show');
    }
    
    // Eventos para o campo de serviço
    serviceInput.addEventListener('focus', showDropdown);
    serviceInput.addEventListener('input', () => {
      fillOptions(serviceInput.value);
      showDropdown();
    });
    
    // Fecha o dropdown ao clicar fora
    document.addEventListener('click', (e) => {
      if (!e.target.closest('.service-dropdown')) {
        hideDropdown();
      }
    });
    
    // Inicializa a lista de serviços selecionados
    renderSelectedServices();
    
        // Validação do formulário e envio
    const btnNext = document.querySelector('.btn-next');
    const neighborhoodSelect = document.querySelector('select[name="neighborhood"]');

    // Adicionar classe visual quando o campo não for válido
    neighborhoodSelect.addEventListener('change', function() {
      if (this.value === '') {
        this.classList.add('input-invalid');
        
        // Remover qualquer mensagem de erro existente
        const existingError = this.parentNode.querySelector('.error-message');
        if (existingError) existingError.remove();
        
        // Adicionar mensagem de erro
        const errorMessage = document.createElement('div');
        errorMessage.className = 'error-message';
        errorMessage.textContent = 'Por favor, selecione um bairro';
        this.parentNode.appendChild(errorMessage);
      } else {
        this.classList.remove('input-invalid');
        this.classList.add('input-valid');
        
        // Remover mensagem de erro se existir
        const existingError = this.parentNode.querySelector('.error-message');
        if (existingError) existingError.remove();
      }
    });

    btnNext.addEventListener('click', function(e) {
      // Efeito visual de ripple
      let posX = e.offsetX;
      let posY = e.offsetY;
      
      let rippleEffect = document.createElement('span');
      rippleEffect.className = 'ripple';
      rippleEffect.style.left = posX + 'px';
      rippleEffect.style.top = posY + 'px';
      rippleEffect.style.width = Math.max(this.offsetWidth, this.offsetHeight) * 2 + 'px';
      rippleEffect.style.height = Math.max(this.offsetWidth, this.offsetHeight) * 2 + 'px';
      rippleEffect.style.marginLeft = -(Math.max(this.offsetWidth, this.offsetHeight)) + 'px';
      rippleEffect.style.marginTop = -(Math.max(this.offsetWidth, this.offsetHeight)) + 'px';
      
      this.appendChild(rippleEffect);
      
      setTimeout(() => {
        rippleEffect.remove();
      }, 500);
      
      // Validar o campo de bairro
      if (neighborhoodSelect.value === '') {
        neighborhoodSelect.classList.add('input-invalid');
        neighborhoodSelect.classList.add('shake');
        
        // Adicionar mensagem de erro se não existir
        if (!neighborhoodSelect.parentNode.querySelector('.error-message')) {
          const errorMessage = document.createElement('div');
          errorMessage.className = 'error-message';
          errorMessage.textContent = 'Por favor, selecione um bairro';
          neighborhoodSelect.parentNode.appendChild(errorMessage);
        }
        
        // Rolar até o campo com erro
        neighborhoodSelect.scrollIntoView({ behavior: 'smooth', block: 'center' });
        
        // Remover animação de shake após a conclusão
        setTimeout(() => {
          neighborhoodSelect.classList.remove('shake');
        }, 600);
        
        return; // Impedir o envio do formulário
      }
      
      // Validação para modo trabalhador - precisa ter pelo menos um serviço selecionado
      if (currentMode === 'trabalhador' && selectedServices.length === 0) {
        alert("Por favor, selecione pelo menos um serviço antes de se registrar.");
        document.querySelector('.service-dropdown').scrollIntoView({ behavior: 'smooth', block: 'center' });
        return;
      }
      
      // Aqui você pode adicionar mais validações e o código de envio do formulário
      console.log('Registro enviado com sucesso!');
      console.log('Serviços selecionados:', selectedServices);
      
      // Simulação de envio bem-sucedido
      alert('Registro enviado com sucesso!');
    });
  </script>
</body>
</html>